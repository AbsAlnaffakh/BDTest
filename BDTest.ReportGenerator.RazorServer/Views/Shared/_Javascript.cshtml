<script>
    function onWindowFullyLoaded(callback) {
        if (document.readyState === 'complete') {
            callback();
        } else {
            window.addEventListener('load', callback);
        }
    }
    
    function onDomLoaded(callback) {
        if (document.readyState !== 'loading') {
            callback();
        } else {
            document.addEventListener('DOMContentLoaded', callback);
        }
    }

    onDomLoaded(function() {
      let toggleElements = document.getElementsByClassName("toggle-hide");
      
      for (let toggleElement of toggleElements) {
          toggleElement.addEventListener("click", function() {
            let childElementIdToHide = toggleElement.getAttribute("element-id-to-hide");
            let childElementToHide = document.getElementById(childElementIdToHide);
            
            if (childElementToHide.style.display === "none") {
                childElementToHide.style.display = "block";
              } else {
                childElementToHide.style.display = "none";
              }
            
            if(toggleElement.hasAttribute("toggle-alternative-text")) {
                var alternativeText = toggleElement.getAttribute("toggle-alternative-text");
                var currentText = toggleElement.textContent;
                
                toggleElement.textContent = alternativeText;
                toggleElement.setAttribute("toggle-alternative-text", currentText);
            }
          })
      }
    })
</script>

<script>
onDomLoaded(function() {
  function getAll(selector) {
      let parent = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : document;
  
      return Array.prototype.slice.call(parent.querySelectorAll(selector), 0);
    }
    
  // Modals
    let rootEl = document.documentElement;
    let $modals = getAll('.modal');
    let $modalButtons = getAll('.modal-link');
    let $modalCloses = getAll('.modal-background, .modal-close, .modal-card-head .delete, .modal-card-foot .button');
  
    if ($modalButtons.length > 0) {
      $modalButtons.forEach(function ($el) {
        $el.addEventListener('click', function () {
          let target = $el.dataset.target;
          openModal(target);
        });
      });
    }
  
    if ($modalCloses.length > 0) {
      $modalCloses.forEach(function ($el) {
        $el.addEventListener('click', function () {
          closeModals();
        });
      });
    }
  
    function openModal(target) {
      let $target = document.getElementById(target);
      rootEl.classList.add('is-clipped');
      $target.classList.add('is-active');
    }
  
    function closeModals() {
      rootEl.classList.remove('is-clipped');
      $modals.forEach(function ($el) {
        $el.classList.remove('is-active');
      });
    }
  
    document.addEventListener('keydown', function (event) {
      let e = event || window.event;
      if (e.keyCode === 27) {
        closeModals();
      }
    });
  });
</script>