<script>
    function onWindowFullyLoaded(callback) {
        if (document.readyState === 'complete') {
            callback();
        } else {
            window.addEventListener('load', callback);
        }
    }
    
    function onDomLoaded(callback) {
        if (document.readyState !== 'loading') {
            callback();
        } else {
            document.addEventListener('DOMContentLoaded', callback);
        }
    }
    
    function toggleElementVisibility(element) {
      if (element.classList.contains("invisible")) {
                      element.classList.remove("invisible");
                    } else {
                      element.classList.add("invisible");
                    }
    }
    
    function toggleAlternativeText(element) {
          if(element.hasAttribute("toggle-alternative-text")) {
                          let alternativeText = element.getAttribute("toggle-alternative-text");
                          let currentText = element.textContent;
                          
                          element.textContent = alternativeText;
                          element.setAttribute("toggle-alternative-text", currentText);
                      }
        }

    onDomLoaded(function() {
      let toggleElements = document.getElementsByClassName("toggle-hide");
      
      for (let toggleElement of toggleElements) {
          toggleElement.addEventListener("click", function() {
            let childElementIdToHide = toggleElement.getAttribute("element-id-to-hide");
            let childElementToHide = document.getElementById(childElementIdToHide);
            
            toggleElementVisibility(childElementToHide);
            
            toggleAlternativeText(toggleElement);
          })
      }
    })
    
    onDomLoaded(function () {
        let scenarioGroupElements = document.querySelectorAll('tr[scenario-group]');
    
        for (let scenarioGroupElement of scenarioGroupElements) {
            scenarioGroupElement.addEventListener("click", function () {
                let scenarioGroupId = scenarioGroupElement.getAttribute("scenario-group");
                let scenarioElementsInThatGroup = document.querySelectorAll('tr[parent-scenario-group="' + scenarioGroupId + '"]');
                
                Array.prototype.forEach.call (scenarioElementsInThatGroup, function (scenarioInGroup) {
                    toggleElementVisibility(scenarioInGroup);
                });
            });
        }
    });
</script>

<script>
onDomLoaded(function() {
  function getAll(selector) {
      let parent = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : document;
  
      return Array.prototype.slice.call(parent.querySelectorAll(selector), 0);
    }
    
  // Modals
    let rootEl = document.documentElement;
    let $modals = getAll('.modal');
    let $modalButtons = getAll('.modal-link');
    let $modalCloses = getAll('.modal-background, .modal-close, .modal-card-head .delete, .modal-card-foot .button');
  
    if ($modalButtons.length > 0) {
      $modalButtons.forEach(function ($el) {
        $el.addEventListener('click', function () {
          let target = $el.dataset.target;
          openModal(target);
        });
      });
    }
  
    if ($modalCloses.length > 0) {
      $modalCloses.forEach(function ($el) {
        $el.addEventListener('click', function () {
          closeModals();
        });
      });
    }
  
    function openModal(target) {
      let $target = document.getElementById(target);
      rootEl.classList.add('is-clipped');
      $target.classList.add('is-active');
    }
  
    function closeModals() {
      rootEl.classList.remove('is-clipped');
      $modals.forEach(function ($el) {
        $el.classList.remove('is-active');
      });
    }
  
    document.addEventListener('keydown', function (event) {
      let e = event || window.event;
      if (e.keyCode === 27) {
        closeModals();
      }
    });
  });
</script>

<script src="~/js/Chart.min.js"></script>